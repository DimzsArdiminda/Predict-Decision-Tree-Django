{% include 'layout/app.html' %}
<div class="container mt-5 mb-5">
	<h1 class="text-center">Sistem Prediksi Penyakit Jantung</h1>
	<div class="row mt-4">
		<form method="post" action="{% url 'predict' %}">
			{% csrf_token %}
			<div class="form-group">
				<label for="age">Masukkan usia (dalam tahun): </label>
				<input type="number" id="age" name="age" required class="form-control" />
			</div>

			<div class="form-group">
				<label for="sex">Masukkan jenis kelamin: </label>
				<select id="sex" name="sex" required class="form-control">
					<option value="1">Pria</option>
					<option value="0">Wanita</option>
				</select>
			</div>

			<div class="form-group">
				<label for="chest_pain_type">Masukkan tipe nyeri dada: </label>
				<select id="chest_pain_type" name="chest_pain_type" required class="form-control">
					<option value="1">typical angina</option>
					<option value="2">atypical angina</option>
					<option value="3">non-anginal pain</option>
					<option value="4">asymptomatic</option>
				</select>
			</div>

			<div class="form-group">
				<label for="resting_bp">Masukkan tekanan darah istirahat (mm Hg): </label>
				<input type="number" id="resting_bp" name="resting_bp" required class="form-control" />
			</div>

			<div class="form-group">
				<label for="cholesterol">Masukkan kolesterol (mg/dl): </label>
				<input type="number" id="cholesterol" name="cholesterol" required class="form-control" />
			</div>

			<div class="form-group">
				<label for="fasting_blood_sugar">Masukkan apakah kadar gula darah puasa > 120 mg/dl: </label>
				<select id="fasting_blood_sugar" name="fasting_blood_sugar" required class="form-control">
					<option value="1">True</option>
					<option value="0">False</option>
				</select>
			</div>

			<div class="form-group">
				<label for="resting_ecg">Masukkan hasil elektrokardiogram istirahat: </label>
				<select id="resting_ecg" name="resting_ecg" required class="form-control">
					<option value="0">normal</option>
					<option value="1">ST-T wave abnormality</option>
					<option value="2">left ventricular hypertrophy</option>
				</select>
			</div>

			<div class="form-group">
				<label for="max_heart_rate">Masukkan detak jantung maksimal (71-202): </label>
				<input type="number" id="max_heart_rate" name="max_heart_rate" required class="form-control" min="71" max="202" />
			</div>

			<div class="form-group">
				<label for="exercise_angina">Apakah Anda mengalami angina yang dipicu oleh latihan?: </label>
				<select id="exercise_angina" name="exercise_angina" required class="form-control">
					<option value="1">Ya</option>
					<option value="0">Tidak</option>
				</select>
			</div>

			<div class="form-group">
				<label for="oldpeak">Masukkan depresi ST oldpeak: </label>
				<input type="number" id="oldpeak" name="oldpeak" required placeholder="0.0 atau 1.0" class="form-control" min="0.0" max="1.0" />
			</div>

			<div class="form-group">
				<label for="slope">Masukkan kemiringan segmen ST puncak latihan: </label>
				<select id="slope" name="slope" required class="form-control">
					<option value="0">upsloping</option>
					<option value="1">flat</option>
					<option value="2">downsloping</option>
				</select>
			</div>

			<button type="submit" class="btn btn-primary mt-3">Prediksi</button>
		</form>

		<!-- hasil -->
		{% if result %}
		<div class="container mt-5 mb-5">
			<h1 class="text-center">Hasil Prediksi Penyakit Jantung</h1>

			<div class="mt-4">
				<h3>Prediksi:</h3>
				<p>{{ result }}</p>
			</div>

			<div class="mt-4">
				<h3>Akurasi Model:</h3>
				<p>{{ accuracy_message }}</p>
			</div>

			<div class="mt-4">
				<h3>Laporan Klasifikasi:</h3>
				<pre>{{ classification_report }}</pre>
			</div>

			<div class="mt-4">
				<h3>Confusion Matrix:</h3>
				<table class="table">
					<thead>
						<tr>
							<th></th>
							<th>Prediksi Negatif</th>
							<th>Prediksi Positif</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<th>Actual Negatif</th>
							<td>{{ confusion_matrix.0.0 }}</td>
							<td>{{ confusion_matrix.0.1 }}</td>
						</tr>
						<tr>
							<th>Actual Positif</th>
							<td>{{ confusion_matrix.1.0 }}</td>
							<td>{{ confusion_matrix.1.1 }}</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>

		{% endif %}
	</div>
</div>
